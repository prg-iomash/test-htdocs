<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HIKARI STUDIO —gallery</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/gallery.css" />

  <!-- Lightbox 최소 스타일 (이 파일에 포함해두면 바로 동작) -->
  <style>
    .lightbox {
      position: fixed; inset: 0;
      display: none; align-items: center; justify-content: center;
      background: rgba(0,0,0,.8); z-index: 1000;
    }
    .lightbox.active { display: flex; }
    .lightbox img {
      max-width: 90vw; max-height: 90vh;
      border-radius: 12px; background:#fff; padding:8px;
      box-shadow: 0 8px 30px rgba(0,0,0,.5);
      object-fit: contain; animation: lbIn .25s ease;
    }
    .lightbox-close {
      position: absolute; top: 16px; right: 22px;
      font-size: 32px; color: #fff; cursor: pointer; user-select: none;
      line-height: 1;
    }
    @keyframes lbIn { from {opacity:0; transform:scale(.96);} to {opacity:1; transform:scale(1);} }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="inner">
      <h1 class="logo">HIKARI STUDIO</h1>
      <nav class="main-nav">
        <!-- 공백 없앤 index 링크 -->
        <a href="../index.html">HOME</a>
        <a href="../pages/profile.html">PROFILE</a>
        <a href="#" class="active">GALLERY</a>
        <a href="../pages/contact.html">CONTACT</a>
        <a href="../pages/photography.html">PHOTOGRAPHY</a>
        <a href="https://www.instagram.com/roji_4jin/?igshid=YmMyMTA2M2Y=" target="_blank" rel="noopener">INSTAGRAM</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- Tagline -->
    <section class="tagline">
      <p>사진작가 ‘로지’의 시선으로 포착한 순간들을 감상해보세요.</p>
    </section>

    <!-- Categories (썸네일은 고정) -->
    <section class="categories">
      <h3 class="cat-label">Category</h3>
      <div class="cat-grid">
        <a class="cat-card active" href="#" data-cat="portrait">
          <div class="thumb" style="background-image:url('../images/gallay/category_portrait.jpg');"></div>
          <span>인물사진</span>
        </a>
        <a class="cat-card" href="#" data-cat="couple">
          <div class="thumb" style="background-image:url('../images/gallay/category_friendship_snap.jpg');"></div>
          <span>커플/우정사진</span>
        </a>
        <a class="cat-card" href="#" data-cat="landscape">
          <div class="thumb" style="background-image:url('../images/gallay/category_landscape.jpg');"></div>
          <span>풍경사진</span>
        </a>
        <a class="cat-card" href="#" data-cat="vehicle">
          <!-- 콜론(:)이 있는 파일명은 웹서버에서 문제될 수 있어요. 필요하면 파일명을 바꾸세요. -->
          <div class="thumb" style="background-image:url('../images/gallay/category_airplane_car.jpg');"></div>
          <span>자동차/항공기 사진</span>
        </a>
      </div>
    </section>

    <!-- Masonrygallery (JS가 주입) -->
    <section id="gallery" class="masonry"></section>
  </main>

  <!-- Lightbox (본문 끝, 스크립트 위) -->
  <div class="lightbox" id="lightbox">
    <span class="lightbox-close" id="lightbox-close">&times;</span>
    <img src="" alt="Expanded view">
  </div>

  <!-- JS: 썸네일은 그대로, 갤러리만 교체 + Lightbox -->
  <script>
  // pages/gallery.html 기준 공통 폴더
  const BASE = "../images/gallay/";

  // 파일명만 카테고리별로 나열하세요 (모두 같은 폴더에 있는 경우)
  const FILES = {
    portrait: [
      "portrait/portrait_01.jpg",
      "portrait/portrait_02.jpg",
      "portrait/portrait_03.jpg",
      "portrait/portrait_04.jpg",
      "portrait/portrait_05.jpg",
      "portrait/portrait_06.jpg",
      "portrait/portrait_07.jpg",
      "portrait/portrait_08.jpg",
      "portrait/portrait_09.jpg",
      "portrait/portrait_10.jpg",
      "portrait/portrait_11.jpg",
      "portrait/portrait_12.jpg",
      "portrait/portrait_13.jpg",
      "portrait/portrait_14.jpg",
      "portrait/portrait_15.jpg",
      "portrait/portrait_16.jpg",
      "portrait/portrait_17.jpg",
      "portrait/portrait_18.jpg",
      "portrait/portrait_19.jpg",
      "portrait/portrait_20.jpg",
    ],
    couple: [
      "couple/couple_friendship_01.jpg",
      "couple/couple_friendship_02.jpg",
      "couple/couple_friendship_03.jpg",
      "couple/couple_friendship_04.jpg",
      "couple/couple_friendship_05.jpg",
      "couple/couple_friendship_06.jpg",
      "couple/couple_friendship_07.jpg",
      "couple/couple_friendship_08.jpg",
      "couple/couple_friendship_09.jpg",
      "couple/couple_friendship_10.jpg",
      "couple/couple_friendship_11.jpg",
      "couple/couple_friendship_12.jpg",
      "couple/couple_friendship_13.jpg",
      "couple/couple_friendship_14.jpg",
      "couple/couple_friendship_15.jpg",
      "couple/couple_friendship_16.jpg",
      "couple/couple_friendship_17.jpg",
    ],
    landscape: [
      "landscape/landscape_01.jpg",
      "landscape/landscape_02.jpg",
      "landscape/landscape_03.jpg",
      "landscape/landscape_04.jpg",
      "landscape/landscape_05.jpg",
      "landscape/landscape_06.jpg",
      "landscape/landscape_07.jpg",
      "landscape/landscape_08.jpg",
      "landscape/landscape_09.jpg",
      "landscape/landscape_10.jpg",
      "landscape/landscape_11.jpg",
      "landscape/landscape_12.jpg",
      "landscape/landscape_13.jpg",
      "landscape/landscape_14.jpg",
      "landscape/landscape_15.jpg",
      "landscape/landscape_16.jpg",
    ],
    vehicle: [
      "vehicle/traffic_01.jpg",
      "vehicle/traffic_02.jpg",
      "vehicle/traffic_03.jpg",
      "vehicle/traffic_04.jpg",
      "vehicle/traffic_05.jpg",
      "vehicle/traffic_06.jpg",
      "vehicle/traffic_07.jpg",
      "vehicle/traffic_08.jpg",
      "vehicle/traffic_09.jpg",
      "vehicle/traffic_10.jpg",
      "vehicle/traffic_11.jpg",
      "vehicle/traffic_12.jpg",
      "vehicle/traffic_13.jpg",
      "vehicle/traffic_14.jpg",
      "vehicle/traffic_15.jpg",
      "vehicle/traffic_16.jpg",
      "vehicle/traffic_17.jpg",
    ],
  };

  // 파일명 배열 → {src, alt} 변환
  const toItems = (names, prefix) =>
    names.map((name, i) => ({
      src: encodeURI(BASE + name), // 한글/공백 안전
      alt: `${prefix} ${String(i + 1).padStart(2, "0")}`,
    }));

  // 최종 렌더 데이터
  const IMAGES = {
    portrait: toItems(FILES.portrait, "Portrait"),
    couple: toItems(FILES.couple, "Couple"),
    landscape: toItems(FILES.landscape, "Landscape"),
    vehicle: toItems(FILES.vehicle, "Vehicle"),
  };

  // Lightbox 요소
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = lightbox.querySelector("img");
  const closeBtn = document.getElementById("lightbox-close");

  // 갤러리 렌더 (썸네일은 건드리지 않음!)
  function renderGallery(cat){
    const data = IMAGES[cat] || [];
    const wrap = document.getElementById('gallery');

    wrap.innerHTML = data.map(({src, alt}) => `
      <figure class="m-item">
        <img loading="lazy" src="${src}" alt="${alt}">
      </figure>
    `).join("");

    // active 토글만 (썸네일 배경은 교체하지 않음)
    document.querySelectorAll('.cat-card').forEach(card=>{
      card.classList.toggle('active', card.dataset.cat === cat);
    });
  }

  // 카테고리 클릭 → 렌더
  document.querySelectorAll('.cat-card').forEach(card=>{
    card.addEventListener('click', (e)=>{
      e.preventDefault();
      const cat = card.dataset.cat;
      // 뒤로가기 지원
      if (location.hash !== `#${cat}`) location.hash = cat;
      else renderGallery(cat);
    });
  });

  // 해시 변화 대응
  window.addEventListener('hashchange', ()=>{
    const cat = (location.hash || '#portrait').slice(1);
    renderGallery(cat);
  });

  // 초기 로드
  document.addEventListener('DOMContentLoaded', ()=>{
    const initial = (location.hash || '#portrait').slice(1);
    renderGallery(initial);
  });

  /* ========= Lightbox 동작 (이벤트 위임으로 동적 갤러리 대응) ========= */
  document.getElementById('gallery').addEventListener('click', (e)=>{
    const img = e.target.closest('img');
    if(!img) return;
    lightbox.classList.add('active');
    lightboxImg.src = img.src;
    lightboxImg.alt = img.alt || '';
  });

  // 닫기 버튼 / 배경 / ESC
  document.getElementById('lightbox-close').addEventListener('click', ()=> {
    lightbox.classList.remove('active');
  });
  lightbox.addEventListener('click', (e)=>{
    if(e.target === lightbox) lightbox.classList.remove('active');
  });
  window.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape') lightbox.classList.remove('active');
  });
  </script>
</body>
</html>
